<!DOCTYPE html><html>
	<head>
		<meta charset="utf-8" />
		<meta content="yes" name="apple-mobile-web-app-capable" />
		<meta content="FqZmg6H3v_nmsp9fiNgPYGahHNM5GZHxomGGCYO0Dfo" name="google-site-verification" />
		<meta content="This tool allows you to play any Hopscotch project, regardless of whether or not it is published, filtered, or custom data." name="description" />
		<link rel="icon" type="image/png" sizes="32x32" href="/hs-tools/icons/favicon-32x32.png">
		<link rel="icon" type="image/png" href="https://aws1.discourse-cdn.com/gethopscotch/original/3X/3/8/3836ff26c18740a553e96462dc1ece3d8e7f4869.png">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<link rel="apple-touch-icon" sizes="180x180" href="/hs-tools/icons/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/hs-tools/icons/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/hs-tools/icons/favicon-16x16.png">
		<link rel="manifest" href="/hs-tools/icons/site.webmanifest">
		<link rel="mask-icon" href="/hs-tools/icons/safari-pinned-tab.svg" color="#5bbad5">
		<link rel="shortcut icon" href="/hs-tools/icons/favicon.ico">
		<meta name="apple-mobile-web-app-title" content="Hopscotch Tools">
		<meta name="application-name" content="Hopscotch Tools">
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="msapplication-config" content="/hs-tools/icons/browserconfig.xml">
		<meta name="theme-color" content="#ffffff">
		<title>Loading...</title>
		<meta content="summary_large_image" name="twitter:card" />
		<meta content="617098629" name="twitter:app:id:iphone" />
		<meta content="617098629" name="twitter:app:id:ipad" />
		<meta content="US" name="twitter:app:country" />
		<meta content="@hopscotch" name="twitter:site" />
		<meta content="Play a Hopscotch Project" name="twitter:title" />
		<meta content="This tool allows you to play any Hopscotch project, regardless of whether or not it is published, filtered, or custom data." name="twitter:description" />
		<meta content="website" property="og:type" />
		<meta content="Awesome_E's Hopscotch Tools" property="og:site_name" />
		<meta content="Play a Hopscotch Project" property="og:title" />
		<meta content="This tool allows you to play any Hopscotch project, regardless of whether or not it is published, filtered, or custom data." property="og:description" />
		<meta content="/hs-tools/images/hs-logo-h.png"" property="og:image" /> <!--AE_MOD -->
		<meta content="width=device-width,initial-scale=1,user-scalable=no,maximum-scale=1" name="viewport" />
		<link rel="stylesheet" media="screen" href="https://c.gethopscotch.com/assets/application-c0d659f5bf18bd7a23099c762e7492f3961d34062add260f1d80d101fd5db01e.css" />
		<meta name="csrf-param" content="authenticity_token" />
		<meta name="csrf-token" content="Xonf2Bn4pgVRZobpf3Nfuzvd7P3rCyCySJSHi4S9XQRNoKQiOrWClrrw8ll6ZBVi/p6ryAbAAhOvDCMEw9VlOw==" />
		<link href="https://fast.fonts.net/cssapi/8241d903-e7fe-4a18-8a4d-2d6414db23d8.css" rel="stylesheet" type="text/css" />
		<script src="../main.js"></script><!-- AE MOD -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><!-- AE MOD -->
		<style>
			* body.embedded #fullscreen-button {
				display: inline-block;
			}
			h2 {
				color: #666;
			}
			
			.play-button.has-keyboard::before {
				content: "\f11c";
				background-color: rgb(180,180,180);
				width: 30px;
				height: 24px;
				display: flex;
				position: absolute;
				right: -8px;
				top: -6px;
				font-family: FontAwesome;
				padding: 2px;
				justify-content: center;
				align-items: center;
				border-radius: 6px;
				pointer-events: none;
				font-size: 18px;
			}
			
			.achievement-banner {
				position: absolute;
				top: -96px;
				right: 8px;
				width: 320px;
				height: 64px;
				background: gray;
				padding: 8px;
				border-radius: 8px;
				z-index: 10;
				animation-duration: 1s;
				backdrop-filter: blur(8px);
				-webkit-backdrop-filter: blur(8px);
				opacity: 0.8;
				user-select: none;
			}
			.achievement-banner div {
				position: absolute;
				top: 8px;
				right: 8px;
				display: inline-block;
				width: calc(100% - 72px);
				height: calc(100% - 16px);
				color: #ddd;
				padding: 2px;
			}
			.achievement-banner .fa-close {
				position: absolute;
				top: 3px;
				right: 5px;
				padding: 2px;
				font-size: 14px;
				color: white;
			}
			.achievement-name {
				display: block;
				font-size: 24px;
				margin-bottom: 4px;
			}
			.achievement-description {
				font-size: 14px;
				text-indent: 1px;
				display: inline-block;
			}
			
			@keyframes banner-in {
				from {top: -96px;}
				to {top: 8px;}
			}
			@keyframes banner-out {
				from {top: 8px;}
				to {top: -96px;}
			}
		</style>
	</head>
</html>

<body class="project webplayer embedded">
	<div class="wrapper"><div class="content" id="body_content">

	<script id="svgInsert" src="https://awesome-e.github.io/hs-tools/play-project/html_svg.js"></script>
	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-database.js"></script>
	<script>
		var projectImport = projectImport || {};
		var AE_MOD = {
			"projectData": {},
			"uuid": "",
			"playerVersion": "",
			"webplayer_action": function(a, b) {
				try {
					a = JSON.parse(a.replace(/"_data"/g,b));
					a.args = a.args || [];
				} catch (e) {
					console.error("Invalid webplayer action:" + a);
					return;
				}
				switch (a.name) {
					case "restart":
						document.getElementById("restart-button").click();
						break;
					case "js-console-log":
						console.log('%cAwesome_Eâ€™s Project Player%c ' + a.args, 'display:block; padding: 4px 6px; background-color: salmon; color: white; font-weight: bold;','');
						break;
					case "js-alert":
						alert('Args:\n'+a.args+'\n\nData:'+b);
						break;
					case "js-prompt":
						return Number(prompt(a.args[0],(a.args[1]||"")));
					case "checkKey":
						return Number(a.args.repeatEach(function(k){
							return AE_MOD.keyboardKeys.includes(k);
						}).includes(true));
					case "checkKeyData":
						return Number(AE_MOD.keyboardKeys.includes(b));
					case "checkKeyAll":
						return Number(!a.args.repeatEach(function(k){
							return AE_MOD.keyboardKeys.includes(k);
						}).includes(false));
					case "isWebExp":
						return 1;
					case "isComputer":
						return Number(!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&!(navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1));
					case "user-tz":
						return Math.round(new Date().getTimezoneOffset()/-60);
					case "achievement":
						var target = document.getElementById("achievement-banner");
						target.innerHTML = "";
						target.innerHTML = a.args[0];
						banner(true);
						break;
					case "session-new":
						if (session.gameId && session.isHost) {
							if (!confirm("Your current session (" + session.gameId + ") is still active! Would you like to create a new session anyways?")) break;
							session.leave();
						} else if (session.gameId) {
							if (!confirm("You are currently in a session (" + session.gameId + ")! Are you sure you want to leave?")) break;
							session.leave();
						}
						session.isHost = true;
						session.maxSize = a.args[0];
						session.gameId = Math.round(Math.random()*36**6).toString(36);
							var now = Math.round(Date.now()/1000).toString(36);
							session.userJoined = now + session.userId;
						firebase.database().ref("live-projects/"+AE_MOD.projectData.uuid+"-"+session.gameId+"/users/"+session.userJoined).set(true);
						firebase.database().ref("live-projects/"+AE_MOD.projectData.uuid+"-"+session.gameId+"/createdAt").set(new Date().toISOString());
						copyText(session.gameId);
						setTimeout(function(){alert("Session ID copied to clipboard: " + session.gameId)},10);
						
						firebase.database().ref("live-projects/"+AE_MOD.projectData.uuid+"-"+session.gameId).on("value",function(s){
							if (session.userJoined) session.data = s.val();
						});
						//AE_MOD.webplayer_action('{"name":"session-write","args":[-2,"createdAt","' + new Date().toISOString() + '"]}');
						return 0;
						break;
					case "session-join":
						if (session.gameId && session.isHost) {
							if (!confirm("Your current session (" + session.gameId + ") is still active! Would you like to join a new session anyways?")) break;
							session.leave();
						} else if (session.gameId) {
							if (!confirm("You are currently in a session (" + session.gameId + ")! Are you sure you want to leave?")) break;
							session.leave();
						}
						session.gameId = (prompt("Enter Session ID:")||"").toLowerCase().replace(/[\s\-\.#\$\[\]]/g,"");
						if (session.gameId) {
							var now = Math.round(Date.now()/1000).toString(36);
							session.userJoined = now + session.userId;
							firebase.database().ref("live-projects/"+AE_MOD.projectData.uuid+"-"+session.gameId).once("value").then(s=>{
								if (s.val()) {
									firebase.database().ref("live-projects/"+AE_MOD.projectData.uuid+"-"+session.gameId+"/users/"+session.userJoined).set(false);
									firebase.database().ref("live-projects/"+AE_MOD.projectData.uuid+"-"+session.gameId).on("value",function(s){
										if (session.userJoined) session.data = s.val();
										if(!s.val()||!s.val().users) {
											if (!s.val() && session.userJoined) alert("The host has ended the session");
											session.leave();
										}
									});
								} else {
									alert("No such session exists");
									session.leave();
								}
							});
						}
						break;
					case "session-read":
						if (!session.data) break;
						try {return eval(a.args.join(""));}catch(e){return 0;}
					case "session-write":
						if (!session.data || !session.gameId || !session.data.users || !session.data.game) break;
						firebase.database().ref("live-projects/"+AE_MOD.projectData.uuid+"-"+session.gameId+"/game/"+session.getUser(a.args[0])+"/"+a.args[1]).set(
							a.args[2]
						);
						break;
					case "session-myindex":
						if (!session.data) return 0;
						try {return session.getUser(-1, true);}catch(e){return 0;}
					case "session-leave":
						session.leave();
						break;
					
				}
			}
		};
		
		/***/
		
		var BASE_IMAGE_URL = 'https://hopscotch-images.s3.amazonaws.com/production/images/project-images/';
		var HS_INDEX_PATH = "https://d3nbkco6xo1vz0.cloudfront.net/production/";
		var HS_WEBPLAYER_VERSION = AE_MOD.playerVersion;
		function init() {
			(AE_MOD.projectData.abilities||[]).forEach(a=>{
				(a.blocks||[]).forEach(b=>{
					//Lazy Check Each block
					if (JSON.stringify(b).match(/"type":22[^\{\}]*?"param(s|eters)?":\[\{[^\{\}]*?"value":"_ae_webplayer_action:\{.*?\\"name\\":\\"checkKey(All|Data)?\\".*?\}.*?\]\}/)) document.querySelector(".play-button").classList.add("has-keyboard");
				});
			});
			document.getElementById('hopscotch-link').href = "https://c.gethopscotch.com/p/" + AE_MOD.uuid;
			BASE_IMAGE_URL = "https://hopscotch-images.s3.amazonaws.com/production/images/project-images/";
			HS_INDEX_PATH = "https://d3nbkco6xo1vz0.cloudfront.net/production/";
			HS_WEBPLAYER_VERSION = AE_MOD.playerVersion;
			document.getElementById("appJs").src = "https://awesome-e.github.io/hs-tools/play-project/application.js";
			var pTitle = AE_MOD.projectData.title||'Untitled';
			var pAuthor = (AE_MOD.projectData.user||{'nickname': AE_MOD.projectData.author}).nickname;
			var pTitleFull = pTitle + ((pAuthor == undefined) ? '' : ' by ' + pAuthor);
			document.title = pTitleFull;
			if (!AE_MOD.isCustom) {
				document.querySelector('#project-image').src = 'https://s3.amazonaws.com/hopscotch-cover-images/production/' + AE_MOD.uuid + '.png';
				document.querySelector('meta[property="og:image"]').setAttribute('content', 'https://s3.amazonaws.com/hopscotch-cover-images/production/' + AE_MOD.uuid);
			}
			document.querySelector('meta[property="og:title"]').setAttribute('content', pTitle);
			document.querySelector('meta[property="og:description"]').setAttribute('content', pTitleFull);
			document.querySelector('meta[name="twitter:title"]').setAttribute('content', pTitle);
			document.querySelector('meta[name="twitter:description"]').setAttribute('content', pTitleFull);
			document.querySelector('meta[name="description"]').setAttribute('content', pTitleFull);
		}
		
		/***/
		
		function doCORSRequest(options, printResult) {
			var x = new XMLHttpRequest();
			x.open(options.method, /*'https://cors-anywhere.herokuapp.com/'*/ 'https://api.allorigins.win/raw?url=' + encodeURIComponent(options.url));
			x.onload = x.onerror = function() { printResult(
					//options.method + ' ' + options.url + '\n' +
					//x.status + ' ' + x.statusText + '\n\n' +
					(x.responseText || '')
				);
			};
			if (/^POST/i.test(options.method)) {
			x.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
			}
			x.send(options.data);
		}

		function request(input_url) {
			doCORSRequest({
				method: 'GET',
				url: input_url,
				//data: dataField.value
			}, function printResult(result) {
				try {
					var p = JSON.parse(result);
					AE_MOD.projectData = p;
					AE_MOD.uuid = p.uuid;
					AE_MOD.playerVersion = p.playerVersion||"1.0.0";
					AE_MOD.isCustom = false;
					//Authorize if Project contains session blocks.
					if (/_ae_webplayer_action:{\\"name\\":\\"session-/.test(result)) firebase.auth().signInAnonymously().catch(function(error) {
						// Handle Errors here.
						var errorCode = error.code;
						var errorMessage = error.message;
						// ...
					});
					init();
				} catch (SyntaxError) {
					document.body.innerHTML = "<h2 style='display: block; width: 100%; text-align: center; position: fixed; top: calc(50% - 12px); font-size: 24px;'>Unable to load the project...</h2>";
					console.log('Unable to load');
					console.error(SyntaxError);
					return;
				}
				//OUTPUT
			});
		}
		
		var url = new URL(window.location.href);
		var customUUID = url.searchParams.get("id");
		
		if (JSON.stringify(projectImport) != '{}' || localStorage.getItem("projectFromStorage")) {
			try {
				var p = JSON.stringify(projectImport) != '{}' ? projectImport : JSON.parse(localStorage.getItem("projectFromStorage"));
				p = JSON.parse(localStorage.getItem("projectFromStorage"));
				AE_MOD.projectData = p;
				AE_MOD.uuid = p.uuid;
				AE_MOD.playerVersion = p.playerVersion||"1.0.0";
				AE_MOD.isCustom = true;
				setTimeout(function(){init();},200);
			} catch (SyntaxError) {
				document.body.innerHTML = "<h2 style='display: block; width: 100%; text-align: center; position: fixed; top: calc(50% - 12px); font-size: 24px;'>Unable to load the project...</h2>";
				console.error(SyntaxError);
			}
		} else {
			var req_uuid = customUUID||(prompt('Project URL or UUID','')||'').replace(/.*\/p\//,'');
			request('https://c.gethopscotch.com/api/v1/projects/' + req_uuid);
			replaceLocation("?" + ((req_uuid) ? "id=" + req_uuid : "") + ((url.searchParams.get("play")=="1") ? "&play=1" : ""));
		}
		
		function banner(open){
			var b = document.querySelector(".achievement-banner");
			if (!b.innerHTML) return;
			if (open) {
				b.style.animationName = "banner-in";
				b.style.top = "8px";
			} else {
				b.style.animationName = "banner-out";
				b.style.top = "-96px";
			}
		}
		
		var firebaseConfig = {
			apiKey: "AIzaSyD875SNjpnaKUFFk7c3aR1PCb0RLDmhct0",
			authDomain: "ae-hs-tools.firebaseapp.com",
			databaseURL: "https://ae-hs-tools.firebaseio.com",
			projectId: "ae-hs-tools",
			storageBucket: "ae-hs-tools.appspot.com",
			messagingSenderId: "308306472112",
			appId: "1:308306472112:web:60bfcd36fca7d9723a9f75",
			measurementId: "G-XQBHQKPNWK"
		};
		// Initialize Firebase
		firebase.initializeApp(firebaseConfig);
		
		var session = {
			isHost: false,
			userId: null,
			gameId: null,
			maxSize: 0,
			leave: function(){
				if (session.gameId && session.isHost) firebase.database().ref("live-projects/"+AE_MOD.projectData.uuid+"-"+session.gameId).remove();
				else if (session.gameId){
					firebase.database().ref("live-projects/"+AE_MOD.projectData.uuid+"-"+session.gameId+"/game/"+session.userJoined).remove();
					firebase.database().ref("live-projects/"+AE_MOD.projectData.uuid+"-"+session.gameId+"/users/"+session.userJoined).remove();
				}
				session.isHost = false;
				session.gameId = null;
				if (session.data) session.data = null;
				if (session.userJoined) session.userJoined = null;
			},
			getUser: function(u, id_not_string){
				try {
					if (u == -2) return "";
					if (u == -1) u = Object.keys(session.data.users).sort().indexOf(session.userJoined);
					return (id_not_string) ? u : Object.keys(session.data.users)[u];
				} catch (e) {
					return "error";
				}
			}
		};
		firebase.auth().onAuthStateChanged(function(user) {
		  if (user) {
			// User is signed in
			var isAnonymous = user.isAnonymous;
			session.userId = user.uid;
			//Leave if restart
			document.getElementById("restart-button").addEventListener("click",function(){
				session.leave();
			});
			document.getElementById("restart-button").addEventListener("touchstart",function(){
				session.leave();
			});
		  } else {
			// User is signed out
		  }
		  // ...
		});
		document.body.onunload = function(){
			session.leave();
		};
		document.body.onblur = function(){
			AE_MOD.webplayer_action('{"name":"session-write","args":[-1,"lastInactive","' + new Date().toISOString() + '"]}');
		};
		document.body.onfocus = function(){
			AE_MOD.webplayer_action('{"name":"session-write","args":[-1,"lastInactive",null]}');
		};
	</script>

	<div id="ae-hs-player">
		<div class="player-icon-toolbar" ondragstart="event.preventDefault();">
			<img alt="mute" id="mute-button" class="player-icon" src="https://c.gethopscotch.com/assets/webplayer/speaker-9713bf0a2c5e18bbcf82ff55b8b02a23c2feeb26fe4e18c2c2b96986856e3a42.svg" />
			<img alt="replay" id="restart-button" class="player-icon" src="https://c.gethopscotch.com/assets/webplayer/refresh_button-5a6475850ec2e0b6a9dd0df4a26cfcd2ddc6cf79c858b931df8534d4be6bb67e.svg" />
			<img alt="fullscreen" id="fullscreen-button" class="player-icon" src="https://c.gethopscotch.com/assets/webplayer/fullscreen_button-e27fd53c82e53e33b0c77ccad29570543d1060028d4b1ab26521cf9a09cedd4b.svg" />
			<a id="hopscotch-link" target="_top" onclick="event.preventDefault();">
				<img alt="hopscotch" id="hopscotch-button" class="player-icon" src="https://c.gethopscotch.com/assets/webplayer/hopscotch_button-a64dbfaa6e5b9f817bb28c67cf5dcf6741aac3034464d3305065f1edb6a97617.svg" />
			</a>
		</div>
		<div id="achievement-banner" class="achievement-banner"></div>
		<hopscotch-player id="player" width="Infinity">
		<div id="project_error"><div class="project_error_message"><h2>Sorry, try again later.</h2>
		<script>
		((getPref("replace_fullscreen")||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) ? document.getElementById("fullscreen-button"):document.getElementById("hopscotch-link")).style.display = "none";
		
		setTimeout(function() {
			if (!window.main) {
				project_loading.style.display = 'none';
				project_error.style.display = 'block';
			}
		}, 30000);
			document.body.style.backgroundColor = (getPref("dark_mode")) ? "black" : "";
			document.body.style.backgroundColor = (getPref("dark_mode")) ? "black" : "";
			setTimeout(function(){document.getElementById("project_loading").style.filter = "invert(" + Number(getPref("dark_mode")) + ")";},50);
		</script></div></div>

		<div class="row content" id="play_container_row"><img id="project_loading" src="https://c.gethopscotch.com/assets/webplayer/loading_apple-05eb745176d79ec27d52d544582483fc4d0f6378c7ed2060be24dfc4e8990668.gif" /><div id="play_container" style="display:none"><div id="play_container_bg"></div><img id="project-image" /><a id="play" class="pos-abs" href="#"><div class="play-button teal-button"><span class="triangle"></span></div></a></div></div>
		
		</hopscotch-player>
	</div>
	
	</div></div>
	
	<!-- script src="https://c.gethopscotch.com/assets/application-1a9cf5388bffbc24dfa2009d5e1bc56240d420916697f2f5fe7ed22d96ce3733.js"></script-->
	<script id="appJs"></script>
	<script src="https://c.gethopscotch.com/assets/application/asset_urls-66c72ce90a1ca36d7740a48386256898e3581d114788b7da74cf032ce305c42e.js"></script>

	<!-- script>$('a').on('touchstart', function() { window.location = this.href; });</script -->
</body>
