<!doctype html>
<html>
	<head>
		<title>AE Hopscotch Web</title>
		<link href='https://fonts.googleapis.com/css?family=Dancing Script' rel='stylesheet'>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="../style.css">
		<link rel="stylesheet" href="browserstyle.css">
		<link rel="icon" type="image/png" href="https://aws1.discourse-cdn.com/gethopscotch/original/3X/3/8/3836ff26c18740a553e96462dc1ece3d8e7f4869.png">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		
		<link rel="apple-touch-icon" sizes="180x180" href="/hs-tools/icons/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/hs-tools/icons/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/hs-tools/icons/favicon-16x16.png">
		<link rel="manifest" href="/hs-tools/icons/site.webmanifest">
		<link rel="mask-icon" href="/hs-tools/icons/safari-pinned-tab.svg" color="#5bbad5">
		<link rel="shortcut icon" href="/hs-tools/icons/favicon.ico">
		<meta name="apple-mobile-web-app-title" content="Hopscotch Tools">
		<meta name="application-name" content="Hopscotch Tools">
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="msapplication-config" content="/hs-tools/icons/browserconfig.xml">
		<meta name="theme-color" content="#ffffff">
		
		<link href='https://fonts.googleapis.com/css?family=Avenir' rel='stylesheet'>
		
		<style>
			.topnav {
				background-color: var(--col-bg-toolbar);
				display: flex;
				width: 100%;
				height: 51px;
				position: fixed;
				top: 0px;
				left: 0px;
				overflow-x: auto;
				overflow-y: visible;
				padding-top: 6px;
				z-index: 10;
				border-bottom: var(--col-low-border);
				transition: border-bottom var(--transition-time), background-color var(--transition-time);
			}
			.topnav button {
				z-index: 15;
				padding-left: 24px;
				padding-right: 24px;
				min-width: auto;
				white-space: nowrap;
			}
		</style>
	</head>
	<body>
		<button class="uiBtn" style="position: fixed; left: 0px; bottom: 0px; z-index: 2;" onclick="theme_()" id="themebtn"><i class="fa fa-fw fa-moon-o"> </i></button>
		<button id="xray-show-btn" class="uiBtn xray-contents" style="bottom: 194px; margin: 0" onclick="xray('toggle-show')"><i class="fa fa-fw fa-eye-slash"> </i></button>
		<div class="xray-contents">
			<span id="zoom-display">100</span>
			<input oninput="document.querySelector('#zoom-display').innerHTML=Math.floor(this.value*100);document.documentElement.style.setProperty('--x-ray-zoom', this.value);" type="range" orient="vertical" step="0.02" value="1" min="0.1" max="2"/>
		</div>
		
		<sq>
			<a href="javascript:home()" style="display:block;"><svg id="homeSvg" style="fill:#eee;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 460.298 460.297" style="enable-background:new 0 0 460.298 460.297;" xml:space="preserve"><g><g><path d="M230.149,120.939L65.986,256.274c0,0.191-0.048,0.472-0.144,0.855c-0.094,0.38-0.144,0.656-0.144,0.852v137.041c0,4.948,1.809,9.236,5.426,12.847c3.616,3.613,7.898,5.431,12.847,5.431h109.63V303.664h73.097v109.64h109.629c4.948,0,9.236-1.814,12.847-5.435c3.617-3.607,5.432-7.898,5.432-12.847V257.981c0-0.76-0.104-1.334-0.288-1.707L230.149,120.939z"/><path d="M457.122,225.438L394.6,173.476V56.989c0-2.663-0.856-4.853-2.574-6.567c-1.704-1.712-3.894-2.568-6.563-2.568h-54.816c-2.666,0-4.855,0.856-6.57,2.568c-1.711,1.714-2.566,3.905-2.566,6.567v55.673l-69.662-58.245c-6.084-4.949-13.318-7.423-21.694-7.423c-8.375,0-15.608,2.474-21.698,7.423L3.172,225.438c-1.903,1.52-2.946,3.566-3.14,6.136c-0.193,2.568,0.472,4.811,1.997,6.713l17.701,21.128c1.525,1.712,3.521,2.759,5.996,3.142c2.285,0.192,4.57-0.476,6.855-1.998L230.149,95.817l197.57,164.741c1.526,1.328,3.521,1.991,5.996,1.991h0.858c2.471-0.376,4.463-1.43,5.996-3.138l17.703-21.125c1.522-1.906,2.189-4.145,1.991-6.716C460.068,229.007,459.021,226.961,457.122,225.438z"/></g></g></svg></a>
		</sq>
		<div class="topnav">
			<button onclick="showChannel('Featured')">Featured</button>
			<button onclick="showChannel('Announcements')">Announcements</button>
			<button onclick="showChannel('Curated')">Curated</button>
			<button onclick="showChannel('E’s Picks')">E&rsquo;s Picks</button>
			<button onclick="showChannel('Halloween')" style="display:none;">Halloween</button>
			<button onclick="showChannel('Christmas')">Christmas</button>
			<button onclick="showChannel('Action')">Action</button>
			<button onclick="showChannel('Animation')">Animation</button>
			<button onclick="showChannel('Art')">Art</button>
			<button onclick="showChannel('Build')">Build</button>
			<button onclick="showChannel('Education')">Education</button>
			<button onclick="showChannel('Ideas')">Ideas</button>
			<button onclick="showChannel('Puzzles')">Puzzles</button>
			<button onclick="showChannel('Simulation')">Simulation</button>
			<button onclick="showChannel('Random')">Random</button>
			<button onclick="showChannel('Newest')">Newest</button>
		</div><br><br><br>
		<div class="flex">
			<textarea readonly id="copytext" style="position: fixed; left: -1000px; width: 100px;"></textarea>
			<div hidden="example" class="project-card" id="10b385b55v">
				<a class="thumbnail" href="https://c.gethopscotch.com/p/10b385b55v" id="img-10b385b55v" style="background-image: url('https://s3.amazonaws.com/hopscotch-cover-images/production/10b385b55v.png');"><img hidden="" src="https://s3.amazonaws.com/hopscotch-cover-images/production/10b385b55v.png" onerror="document.getElementById('img-10b385b55v').style='background-image: url(\'../images/no-thumbnail.png\');';"></a>
				<div class="sharelinkbtn">
					<i class="fa fa-link" title="Copy link" onclick="copy('https://c.gethopscotch.com/p/10b385b55v')"></i>
				</div>
				<div class="info">
					<a class="user" href="user.html?id=665372&amp;cd=March 2015" title="Visit The Hopscotch Team’s Profile">The Hopscotch Team</a>
					<name title="Getting started">Getting started</name>
					<stats><span><i class="fa fa-heart"></i> 1601</span><span><i class="fa fa-play"></i> 52750</span><span><i class="fa fa-clock-o"></i> 19w</span></stats>
				</div>
			</div>
			<div hidden="example" class="project-card" id="xii9vn8sh">
				<a class="thumbnail" href="https://c.gethopscotch.com/p/xii9vn8sh" id="img-xii9vn8sh" style="background-image: url('https://s3.amazonaws.com/hopscotch-cover-images/production/xii9vn8sh.png');"><img hidden="" src="https://s3.amazonaws.com/hopscotch-cover-images/production/xii9vn8sh.png" onerror="document.getElementById('img-xii9vn8sh').style='background-image: url(\'../images/no-thumbnail.png\');';"></a>
				<div class="sharelinkbtn">
					<i class="fa fa-link" title="Copy link" onclick="copy('https://c.gethopscotch.com/p/xii9vn8sh')"></i>
				</div>
				<div class="info">
					<a class="user" href="user.html?id=721220&amp;cd=April 2015" title="Visit Valgo⚡️⚡️⚡️’s Profile">Valgo⚡️⚡️⚡️</a>
					<name title="Kaleidocosmos">Kaleidocosmos</name>
					<stats><span><i class="fa fa-heart"></i> 63510</span><span><i class="fa fa-play"></i> 1820665</span><span><i class="fa fa-clock-o"></i> 218w</span></stats>
				</div>
			</div>
			<span style="display:none;" id="ins-before"></span>
		</div>

		<div id="loadingBear">
		</div>
		
		
		<script src="../main.js"></script>
		<script src="projectbrowser.js"></script>
		<!-- script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script-->
		<script src="color-thief.js"></script>
		<script>
			var names = {
				"Featured": "categories/best_of/featured",
				"Announcements": "categories/announcements/newest",
				"Curated": "categories/newest_featured/newest",
				"E’s Picks": "users/5757897/favorite_projects",
				"Halloween": "categories/hhc19/featured",
				"Christmas": "categories/christmas/featured",
				"Action": "categories/action/newest",
				"Animation": "categories/animation/newest",
				"Art": "categories/drawnart/newest",
				"Build": "categories/build/newest",
				"Education": "categories/science/newest",
				"Ideas": "categories/hopscotch/newest",
				"Puzzles": "categories/puzzles/newest",
				"Simulation": "categories/simulations/newest",
				"Random": "categories/other/newest",
				"Newest": "projects/newest"
			}
			
			var path = "categories/best_of/featured";
			function showChannel(channel, addHistoryEntry) {
				path = names[channel];
				
				//Format the buttons
				document.querySelectorAll(".topnav button").forEach(function(btn){
					if (btn.innerHTML == channel) {btn.setAttribute("class", "selected"); btn.scrollIntoView();} else btn.removeAttribute("class");
				});
				
				//Remove all existing project cards
				$(".project-card").remove();
				
				page = 1;
				document.getElementById("loadingBear").style.display = "";
				document.body.scrollTop = 0; // For Safari
				document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
				request(`http://community.gethopscotch.com/api/v2/${path}?page=${page}&api_token=4f7769439adf7ef8e482d2daef77375cd6d0158b65fcdca543b74b5c0c92&user%5Bauth_token%5D=qKok4lCx8YB9Wgp%2Bo862AA%3D%3D&user%5Bid%5D=4753230`);
				
				if (addHistoryEntry != false) {
					(!!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform) /* If on iOS */ ) ? location.href = "?channel=" + encodeURI(channel) : setLocation("?channel=" + encodeURI(channel));
				} else {
					replaceLocation("?channel=" + encodeURI(channel));
				}
								
				channelName = channel;
			}
			var channelName = "Featured";
			
			$(window).scroll(function() {
			   if($(window).scrollTop() + $(window).height() > $(document).height() - 10 && !busy) {
				   request(`http://community.gethopscotch.com/api/v2/${path}?page=${page}&api_token=4f7769439adf7ef8e482d2daef77375cd6d0158b65fcdca543b74b5c0c92&user%5Bauth_token%5D=qKok4lCx8YB9Wgp%2Bo862AA%3D%3D&user%5Bid%5D=4753230`);
			   }
			});
			
			function doCORSRequest(options, printResult) {
				var x = new XMLHttpRequest();
				x.open(options.method, 'https://cors-anywhere.herokuapp.com/' + options.url);
				x.onload = x.onerror = function() {
					var url = new URL(window.location.href);
					var channel = url.searchParams.get("channel");
					console.log (names[url.searchParams.get("channel")] == options.url.replace(/.*?\/api\/v2\/|\?.*/gi,''));
					if (names[url.searchParams.get("channel")] == options.url.replace(/.*?\/api\/v2\/|\?.*/gi,'')) printResult(
						//options.method + ' ' + options.url + '\n' +
						//x.status + ' ' + x.statusText + '\n\n' +
						(x.responseText || '')
					);
				};
				if (/^POST/i.test(options.method)) {
				x.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
				}
				x.send(options.data);
			}

			function request(input_url) {
				busy = true;
				doCORSRequest({
					method: 'GET',
					url: input_url,
					//data: dataField.value
				}, function printResult(result) {
					showProjects(result);
					document.getElementById("loadingBear").style.display = "none";
				});
			}
			
			//Show the default or specified channel
			var url = new URL(window.location.href);
			var channel = url.searchParams.get("channel");
			if (/Featured|Announcements|Curated|E’s Picks|Halloween|Christmas|Action|Animation|Art|Build|Education|Ideas|Puzzles|Simulation|Random|Newest/.test(channel)) {
				showChannel(channel, false);
			} else {
				showChannel("Featured", false);
			}	
			if (window.history && window.history.pushState) {
				$(window).on('popstate', function() {      
					channel = url.searchParams.get("channel");
					if (/Featured|Announcements|Curated|E’s Picks|Halloween|Christmas|Action|Animation|Art|Build|Education|Ideas|Puzzles|Simulation|Random|Newest/.test(channel)) {
						showChannel(channel, false);
					} else {
						showChannel("Featured", false);
					}
				});
			}
			
			</script>
	</body>
</html>
